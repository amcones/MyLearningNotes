这次是需要实现一个流重组器。由于报文段不会按照顺序到达，所以需要流重组器对其进行整理，还原成原本的顺序。

到达的每个报文都带有一个编号，表示它开头的字节在**整体通信数据**当中是第几个，以此来进行重组。

然而，有时还会发生报文之间重叠、覆盖等情况。对此，我们需要做的是：

1. 如果一个报文中的数据与之前写入字节流的能接上，就**立即**写入字节流。
2. 如果不能接上，那么把它放入流重组器的缓存当中，但不能够超出容量。
3. 如果缓存当中有能够与写入字节流的数据接上的，就**立即**写入字节流。
4. 不能够在流重组器的缓存当中存重叠的数据，因为这样会削弱容量的概念。

这是需要实现一个在线的区间合并算法。最暴力的做法就是对每一个字符和它的编号建立映射，处理的时候一个一个处理。这样的话，如果两个数据段之间有重叠，也必须扫完整个串。也就是说，在数据大量重叠的情况下，效率会很低。

优化的方法是以串的形式处理，这样对于连续的段就不用进行反复的遍历。然而这样需要实现非常复杂的合并（或者说我没找到简单的写法），需要讨论很多情况。

因此，我还是采用了第一种写法，虽然慢但是很可靠。吞吐量只有`0.71Gbit/s`。