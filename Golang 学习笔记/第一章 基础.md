## 关键字

`Go`以只有25个关键字而闻名。能做到这么少的原因，一方面是减少了重复功能的冗余，另一方面是让每个关键字的使用率都足够高。

## 运算符

这方面和其他语言差别不大，这边列出主要的区别：
1. 管道运算符`<-`：这个对应`Go`的特性之一，管道。
2. `++`,`--`：`Go`当中自增自减运算符是语句而不是表达式。它只支持`i++`，但不支持`++i`。这也是为了避免广为人知的`undefined behavior`。
3. 没有三元运算符，也是符合`Go`的只提供一种方法做事情。

## 字面量

- 整型
- 浮点型
- 复数型
- 字符型
- 字符串

## 变量

### 基本类型

`Go`当中变量大多是值类型，常见的引用类型有`slice`,`map`,`interface`,`chan`,指针和函数。这方面跟`C`挺像的。**但`Go`中所有定义的变量都会有一个零值。**

定义一个变量有两种方法：
1. `var a int = 1`
2. `a:=1`,只能够在函数内使用（可能是防止外部传值导致无法推断类型）

而常量没有多少可说的，只是有一个在官方源码中大量使用，但实际工程不太使用的`iota`枚举量。

### 指针

与`C`区别不大，但是`Go`禁止了指针的运算，让`GC`的实现简化。通过`栈逃逸`机制实现能够返回局部变量的地址，把它从栈分配到堆上。另外，通过指针访问结构体成员时仍然使用`.`运算符。

### 数组与切片

数组总是需要特别关注一下的。

数组，也常被称为定长数组，为值类型。一旦创建，长度就固定。由于是值类型，传递的时候都是值拷贝。**长度不同的数组是不同的类型。**

切片，也被称为变长数组，为引用类型。其内部维护三个元素

- 指向底层数组的指针
- 切片的元素数量
- 底层数组的容量

可以从一个数组创建一个切片，也可以通过`make`创建并指定切片的`len`和`cap`。可以通过`copy`来复制一个切片，这是值拷贝。

> 当从数组新建切片的时候，如果切片的内容没有超出原数组的长度，那么切片的底层数组指针就指向原数组。如果超出了原数组，那么就会重新开辟一块两倍大小的内存空间，把原来的值全部拷贝过去。
> 当然，`Go`是禁止在原数组上直接建超出原数组范围的切片的。

切片也支持`python`那种截断的方法，但不支持负下标。

### 字典

可以直接使用字面量创建，也可以使用`make`创建一个`map`。
```Go
mp1:=map[string]int{"a":1,"b":2}
mp2:=make(map[int]string)
```

可以使用`range`来遍历map，无序。

可以直接修改`map`键下的值，但需要使用`delete`来删除一个键。

*注意*
- 内置的`map`不是线程安全的，要么上锁要么使用`sync`中的`map`。
- `map`的`value`只能整体替换。比如当`value`是一个结构体，必须把这个结构体整个拿出来，修改完后整个放回去。

### 结构体

大致与`C`一致，内存上连续，一般通过`type`新建一个结构体类型来实现。

初始化的时候不建议通过初始化列表，因为一旦定义修改整个都会报错。推荐使用Field方式新建，其中没有包含的字段将会是零值。

*注意*
- `type newInt int`指新建一个底层数据类型为`int`的类型`newInt`，而`type newInt=int`指给`int`起一个别名叫`newInt`。

## 流程控制

### if

基本与其它相同，但可以在判断条件前加一个简单的初始化子句，以分号隔开。（算是比较标准的现代化特性了）

### 循环

`Go`中只留了一个循环关键字`for`。

### switch

与`C`不同的是，每个`case`自带了一个`break`，不会往下执行。如果需要往下执行，则使用`fallthough`。常用于类型的判断，与`select`形式相似。

### goto

限制了只能在函数内部跳转，不能跳到内部作用域，不能跳过内部变量声明语句。

虽然加了这些限制让它显得安全了一点，但使用仍然不多。