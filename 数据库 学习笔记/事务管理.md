**事务**(Transaction) 是一种机制、一个操作序列，包含了一组数据库操作命令，执行结果必须使数据库从一种一致性状态变到另一种一致性状态。事务把所有命令作为一个整体向系统提交或撤销，也就是要么都执行，要么都不执行，是一个不可分割的逻辑单元。

所以，事务保持了 **逻辑数据一致性** 和 **可恢复性** 。而锁是实现事务的关键，保证事务的完整性和并发性。

## 事务状态

事务在其整个生命周期中会经历不同的状态，这些状态也称为 **事务状态**。

- 活跃状态：事务的第一个状态，任何正在执行的事务都处于此状态，所做的 **更改** 存储在 **主内存的缓冲区** 中。
- 部分提交状态：执行上次操作后，事务进入部分提交状态。之所以是部分提交，是因为所做的更改仍然在主内存的缓冲区中。
- 失败状态：如果某个检查在活动状态下失败，在活动状态或部分提交状态发生一些错误，并且事务无法进一步执行，则事务进入失败状态。
- 中止状态：如果任何事务已达到失败状态，则恢复管理器将数据库回滚到开始执行的原始状态。
- 提交状态：如果所有操作成功执行，则来自 **部分提交状态** 的事务进入提交状态。无法从此状态回滚，它是一个新的 **一致状态**。

## 事务四大特性

原子性(Atomicity)、一致性(Consistency)、隔离性(Isolation)、持久性(Durability)，简称ACID，关系型数据库需要遵循ACID规则。

- 原子性
	也就是事务不可分割。
- 一致性
	当事务完成，数据必须处于一致状态，多个事物对同一个数据读取的结果相同。
- 隔离性
	并发访问数据库时，一个用户的事务不被其他事务所干扰，各个事务不干涉内部的数据。修改数据的事务可以在另一个使用相同数据的事务开始前后访问这些数据。
- 持久性
	一个事物被提交后，对数据库中数据的改变是持久的，即使数据库发生故障也不应该对其有任何影响。

## 如何实现事务的ACID特性

DBMS使用 **日志** 保证事务的 **原子性、一致性和持久性**。

## 事务之间的相互影响

