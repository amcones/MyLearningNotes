## 自上而下分析

从开始符出发，不断往下分析，直到与句型匹配

## LL(1)分析法

### 左递归的消除

假如关于非终结符 $P$ 的文法规则如下：
$$
P \to P\alpha | \beta
$$
其中 $\beta$ 不以 $P$ 开头。
可以把 $P$ 的规则改写为如下非直接左递归形式：
$$
\begin{aligned}
P \to \beta P'\\
P' \to \alpha P' | \epsilon
\end{aligned}
$$
> $P$ 会推导出以 $\beta$ 开头，后面若干个 $\alpha$ 的串，那么可以把后面若干个 $\alpha$ 的串写成 $P'$ ，引入新的非终结符来构成右递归

消除左递归的算法：
1. 把文法 $G$ 的所有非终结符按一个顺序排序成 $P_1,P_2,...,P_n$
2. 执行
```
For i:=1 To n Do
Begin
	For j:=1 To i-1 Do
		把Pi关于Pj的部分全部改写为Pj的定义
	消除Pi的直接左递归
End
```
3. 化简2所得文法，去除从开始符号出发永远无法到达的非终结符产生规则

### 克服回溯

回溯的原因是一个非终结符有多个候选，选的不一定对。

$FIRST(\alpha)$ 就是可以星号推出第一个是终结符a的候选的集合。（其它都不可能对）

如果每个候选的FIRST集合都不相交，那么可以根据面临的第一个输入符号a准确选出哪一个候选。

如果做不到，那么引入新终结符，提取公共左因子，直到每一个非终结符的所有候选首符集都不相交。

定义对于 $G$ 的任何非终结符 $A$ ， $FOLLOW(A)=\{a|S\stackrel{*}{\Rightarrow}...Aa...,a\in V_T\}$ （即A能够推出a紧跟在后面） 。如果 $S$ 能够星号推出以 $A$ 结尾的串，把 # 也加入 $FOLLOW$ 集合。

## 自下而上分析

从句子出发，不断替换可规约串直到回到开始符号。也面临着选择唯一正确候选的问题。

短语：能够向上规约到一个非终结符（充当一定的语法单位），并且在句型的上下文中依然能够充当成分。直接短语表示可以立即规约的串（能够一步规约到非终结符）

定义算符文法为不含连续非终结符的文法，利用产生式本身的性质可以定义终结符的优先级，由此来决定规约顺序。具体来说，**先规约的优先级高**。如果一个算符文法中任何终结符对至多只满足三种优先关系（ $\doteq,\lessdot,\gtrdot$ ）之一，称为算符优先文法。

定义 FIRSTVT(P) （P能够推出的最左边或第一个非终结符右边的终结符）和 LASTVT(P) （P能够推出的最右边或最后一个非终结符左边的终结符），表示终结符集合（与推导关系的定义一致）

FIRSTVT 和 LASTVT 集合的构造先用定义，然后看集合里是否有非终结符开头（结尾）的串