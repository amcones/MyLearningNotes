通行密钥（PassKey），用来干掉密码的究极鉴权方案。

## 原理

简单粗暴，即非对称加密。把公钥存到服务器后，拥有私钥的客户端就可以与服务器进行交互。

## 注册

1. 浏览器从服务器请求 challenge
2. 客户端触发接口生成凭据，发送给服务器
3. 服务器解析并验证注册数据
4. 服务器保存凭据密钥到用户账号

## 登录

1. 从服务器请求 challenge
	challenge 一般是一个随机字符串，目的是防止重放攻击。（即他人使用用户之前登录时的凭证进行登录）
2. 触发浏览器鉴权
	浏览器提供了通行密钥的接口，调用这个接口唤起鉴权。有一些开源库封装了不同浏览器的这个接口，加上一些参数，就可以获得一份凭据（credential）。凭据用来与用户的通行密钥一一对应（一个用户可能在同一个网站上有许多通行密钥，比如多设备登录）。
3. 在服务器中，获取凭据密钥（即凭据 id，公钥等信息，一般存数据库里）。可以先校验 challenge。
4. 校验鉴权，校验服务器请求来的凭据密钥。

## Reference

- [认识 WebAuthn - Ruilin (rui0.cn)](http://rui0.cn/archives/1543)
